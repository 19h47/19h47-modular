function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e,r,t,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void t(e)}u.done?r(s):Promise.resolve(s).then(n,i)}function t(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function u(e){r(a,i,o,u,s,"next",e)}function s(e){r(a,i,o,u,s,"throw",e)}u(void 0)}))}}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function u(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,i,o=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==t.return||t.return()}finally{if(u)throw i}}return o}(e,r)||c(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,r){if(e){if("string"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var f=function(e){var r,t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{s({},"")}catch(e){s=function(e,r,t){return e[r]=t}}function c(e,r,t,n){var i=r&&r.prototype instanceof y?r:y,o=Object.create(i.prototype),a=new A(n||[]);return o._invoke=function(e,r,t){var n=f;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return L()}for(t.method=i,t.arg=o;;){var a=t.delegate;if(a){var u=k(a,t);if(u){if(u===v)continue;return u}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(n===f)throw n=p,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);n=d;var s=l(e,r,t);if("normal"===s.type){if(n=t.done?p:h,s.arg===v)continue;return{value:s.arg,done:t.done}}"throw"===s.type&&(n=p,t.method="throw",t.arg=s.arg)}}}(e,t,a),o}function l(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var q={};s(q,o,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(S([])));x&&x!==t&&n.call(x,o)&&(q=x);var w=g.prototype=y.prototype=Object.create(q);function j(e){["next","throw","return"].forEach((function(r){s(e,r,(function(e){return this._invoke(r,e)}))}))}function E(e,r){function t(i,o,a,u){var s=l(e[i],e,o);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?r.resolve(f.__await).then((function(e){t("next",e,a,u)}),(function(e){t("throw",e,a,u)})):r.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return t("throw",e,a,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function o(){return new r((function(r,i){t(e,n,r,i)}))}return i=i?i.then(o,o):o()}}function k(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,k(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function M(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function O(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:r,done:!0}}return m.prototype=g,s(w,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},j(E.prototype),s(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(r,t,n,i,o){void 0===o&&(o=Promise);var a=new E(c(r,t,n,i),o);return e.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(w),s(w,u,"Generator"),s(w,o,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var r=[];for(var t in e)r.push(t);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=S,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return u.type="throw",u.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),v},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),O(t),v}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var i=n.arg;O(t)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),v}},e}("object"==typeof module?module.exports:{});try{regeneratorRuntime=f}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=f:Function("r","regeneratorRuntime = r")(f)}var h=require("../internals/export"),d=require("../internals/global"),p=require("../internals/is-array"),v=require("../internals/is-constructor"),y=require("../internals/is-object"),m=require("../internals/to-absolute-index"),g=require("../internals/length-of-array-like"),q=require("../internals/to-indexed-object"),b=require("../internals/create-property"),x=require("../internals/well-known-symbol"),w=require("../internals/array-method-has-species-support"),j=require("../internals/array-slice"),E=w("slice"),k=x("species"),M=d.Array,O=Math.max;h({target:"Array",proto:!0,forced:!E},{slice:function(e,r){var t,n,i,o=q(this),a=g(o),u=m(e,a),s=m(void 0===r?a:r,a);if(p(o)&&(t=o.constructor,(v(t)&&(t===M||p(t.prototype))||y(t)&&null===(t=t[k]))&&(t=void 0),t===M||void 0===t))return j(o,u,s);for(n=new(void 0===t?M:t)(O(s-u,0)),i=0;u<s;u++,i++)u in o&&b(n,i,o[u]);return n.length=i,n}});var A=require("../internals/export"),S=require("../internals/array-reduce").left,L=require("../internals/array-method-is-strict"),P=require("../internals/engine-v8-version"),R=require("../internals/engine-is-node");A({target:"Array",proto:!0,forced:!L("reduce")||!R&&P>79&&P<83},{reduce:function(e){var r=arguments.length;return S(this,e,r,r>1?arguments[1]:void 0)}});var T=require("../internals/to-string-tag-support"),I=require("../internals/redefine"),C=require("../internals/object-to-string");T||I(Object.prototype,"toString",C,{unsafe:!0});var _,N,F,G,U=require("../internals/export"),W=require("../internals/is-pure"),D=require("../internals/global"),Y=require("../internals/get-built-in"),$=require("../internals/function-call"),H=require("../internals/native-promise-constructor"),X=require("../internals/redefine"),z=require("../internals/redefine-all"),B=require("../internals/object-set-prototype-of"),J=require("../internals/set-to-string-tag"),K=require("../internals/set-species"),Q=require("../internals/a-callable"),V=require("../internals/is-callable"),Z=require("../internals/is-object"),ee=require("../internals/an-instance"),re=require("../internals/inspect-source"),te=require("../internals/iterate"),ne=require("../internals/check-correctness-of-iteration"),ie=require("../internals/species-constructor"),oe=require("../internals/task").set,ae=require("../internals/microtask"),ue=require("../internals/promise-resolve"),se=require("../internals/host-report-errors"),ce=require("../internals/new-promise-capability"),le=require("../internals/perform"),fe=require("../internals/queue"),he=require("../internals/internal-state"),de=require("../internals/is-forced"),pe=require("../internals/well-known-symbol"),ve=require("../internals/engine-is-browser"),ye=require("../internals/engine-is-node"),me=require("../internals/engine-v8-version"),ge=pe("species"),qe="Promise",be=he.getterFor(qe),xe=he.set,we=he.getterFor(qe),je=H&&H.prototype,Ee=H,ke=je,Me=D.TypeError,Oe=D.document,Ae=D.process,Se=ce.f,Le=Se,Pe=!!(Oe&&Oe.createEvent&&D.dispatchEvent),Re=V(D.PromiseRejectionEvent),Te=!1,Ie=de(qe,(function(){var e=re(Ee),r=e!==String(Ee);if(!r&&66===me)return!0;if(W&&!ke.finally)return!0;if(me>=51&&/native code/.test(e))return!1;var t=new Ee((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[ge]=n,!(Te=t.then((function(){}))instanceof n)||!r&&ve&&!Re})),Ce=Ie||!ne((function(e){Ee.all(e).catch((function(){}))})),_e=function(e){var r;return!(!Z(e)||!V(r=e.then))&&r},Ne=function(e,r){var t,n,i,o=r.value,a=1==r.state,u=a?e.ok:e.fail,s=e.resolve,c=e.reject,l=e.domain;try{u?(a||(2===r.rejection&&De(r),r.rejection=1),!0===u?t=o:(l&&l.enter(),t=u(o),l&&(l.exit(),i=!0)),t===e.promise?c(Me("Promise-chain cycle")):(n=_e(t))?$(n,t,s,c):s(t)):c(o)}catch(e){l&&!i&&l.exit(),c(e)}},Fe=function(e,r){e.notified||(e.notified=!0,ae((function(){for(var t,n=e.reactions;t=n.get();)Ne(t,e);e.notified=!1,r&&!e.rejection&&Ue(e)})))},Ge=function(e,r,t){var n,i;Pe?((n=Oe.createEvent("Event")).promise=r,n.reason=t,n.initEvent(e,!1,!0),D.dispatchEvent(n)):n={promise:r,reason:t},!Re&&(i=D["on"+e])?i(n):"unhandledrejection"===e&&se("Unhandled promise rejection",t)},Ue=function(e){$(oe,D,(function(){var r,t=e.facade,n=e.value;if(We(e)&&(r=le((function(){ye?Ae.emit("unhandledRejection",n,t):Ge("unhandledrejection",t,n)})),e.rejection=ye||We(e)?2:1,r.error))throw r.value}))},We=function(e){return 1!==e.rejection&&!e.parent},De=function(e){$(oe,D,(function(){var r=e.facade;ye?Ae.emit("rejectionHandled",r):Ge("rejectionhandled",r,e.value)}))},Ye=function(e,r,t){return function(n){e(r,n,t)}},$e=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=2,Fe(e,!0))},He=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw Me("Promise can't be resolved itself");var n=_e(r);n?ae((function(){var t={done:!1};try{$(n,r,Ye(He,t,e),Ye($e,t,e))}catch(r){$e(t,r,e)}})):(e.value=r,e.state=1,Fe(e,!1))}catch(r){$e({done:!1},r,e)}}};if(Ie&&(ke=(Ee=function(e){ee(this,ke),Q(e),$(_,this);var r=be(this);try{e(Ye(He,r),Ye($e,r))}catch(e){$e(r,e)}}).prototype,(_=function(e){xe(this,{type:qe,done:!1,notified:!1,parent:!1,reactions:new fe,rejection:!1,state:0,value:void 0})}).prototype=z(ke,{then:function(e,r){var t=we(this),n=Se(ie(this,Ee));return t.parent=!0,n.ok=!V(e)||e,n.fail=V(r)&&r,n.domain=ye?Ae.domain:void 0,0==t.state?t.reactions.add(n):ae((function(){Ne(n,t)})),n.promise},catch:function(e){return this.then(void 0,e)}}),N=function(){var e=new _,r=be(e);this.promise=e,this.resolve=Ye(He,r),this.reject=Ye($e,r)},ce.f=Se=function(e){return e===Ee||e===F?new N(e):Le(e)},!W&&V(H)&&je!==Object.prototype)){G=je.then,Te||(X(je,"then",(function(e,r){var t=this;return new Ee((function(e,r){$(G,t,e,r)})).then(e,r)}),{unsafe:!0}),X(je,"catch",ke.catch,{unsafe:!0}));try{delete je.constructor}catch(e){}B&&B(je,ke)}U({global:!0,wrap:!0,forced:Ie},{Promise:Ee}),J(Ee,qe,!1,!0),K(qe),F=Y(qe),U({target:qe,stat:!0,forced:Ie},{reject:function(e){var r=Se(this);return $(r.reject,void 0,e),r.promise}}),U({target:qe,stat:!0,forced:W||Ie},{resolve:function(e){return ue(W&&this===F?Ee:this,e)}}),U({target:qe,stat:!0,forced:Ce},{all:function(e){var r=this,t=Se(r),n=t.resolve,i=t.reject,o=le((function(){var t=Q(r.resolve),o=[],a=0,u=1;te(e,(function(e){var s=a++,c=!1;u++,$(t,r,e).then((function(e){c||(c=!0,o[s]=e,--u||n(o))}),i)})),--u||n(o)}));return o.error&&i(o.value),t.promise},race:function(e){var r=this,t=Se(r),n=t.reject,i=le((function(){var i=Q(r.resolve);te(e,(function(e){$(i,r,e).then(t.resolve,n)}))}));return i.error&&n(i.value),t.promise}});var Xe=require("../internals/export"),ze=require("../internals/array-iteration").filter;Xe({target:"Array",proto:!0,forced:!require("../internals/array-method-has-species-support")("filter")},{filter:function(e){return ze(this,e,arguments.length>1?arguments[1]:void 0)}});var Be=require("../internals/export"),Je=require("../internals/array-iteration").some;Be({target:"Array",proto:!0,forced:!require("../internals/array-method-is-strict")("some")},{some:function(e){return Je(this,e,arguments.length>1?arguments[1]:void 0)}});var Ke,Qe=require("../internals/export"),Ve=require("../internals/function-uncurry-this"),Ze=require("../internals/object-get-own-property-descriptor").f,er=require("../internals/to-length"),rr=require("../internals/to-string"),tr=require("../internals/not-a-regexp"),nr=require("../internals/require-object-coercible"),ir=require("../internals/correct-is-regexp-logic"),or=require("../internals/is-pure"),ar=Ve("".startsWith),ur=Ve("".slice),sr=Math.min,cr=ir("startsWith");Qe({target:"String",proto:!0,forced:!!(or||cr||(Ke=Ze(String.prototype,"startsWith"),!Ke||Ke.writable))&&!cr},{startsWith:function(e){var r=rr(nr(this));tr(e);var t=er(sr(arguments.length>1?arguments[1]:void 0,r.length)),n=rr(e);return ar?ar(r,n,t):ur(r,t,t+n.length)===n}});var lr=require("../internals/descriptors"),fr=require("../internals/function-name").EXISTS,hr=require("../internals/function-uncurry-this"),dr=require("../internals/object-define-property").f,pr=Function.prototype,vr=hr(pr.toString),yr=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,mr=hr(yr.exec);lr&&!fr&&dr(pr,"name",{configurable:!0,get:function(){try{return mr(yr,vr(this))[1]}catch(e){return""}}});var gr=require("../internals/export"),qr=require("../internals/global"),br=require("../internals/to-absolute-index"),xr=require("../internals/to-integer-or-infinity"),wr=require("../internals/length-of-array-like"),jr=require("../internals/to-object"),Er=require("../internals/array-species-create"),kr=require("../internals/create-property"),Mr=require("../internals/array-method-has-species-support")("splice"),Or=qr.TypeError,Ar=Math.max,Sr=Math.min;gr({target:"Array",proto:!0,forced:!Mr},{splice:function(e,r){var t,n,i,o,a,u,s=jr(this),c=wr(s),l=br(e,c),f=arguments.length;if(0===f?t=n=0:1===f?(t=0,n=c-l):(t=f-2,n=Sr(Ar(xr(r),0),c-l)),c+t-n>9007199254740991)throw Or("Maximum allowed length exceeded");for(i=Er(s,n),o=0;o<n;o++)(a=l+o)in s&&kr(i,o,s[a]);if(i.length=n,t<n){for(o=l;o<c-n;o++)u=o+t,(a=o+n)in s?s[u]=s[a]:delete s[u];for(o=c;o>c-n+t;o--)delete s[o-1]}else if(t>n)for(o=c-n;o>l;o--)u=o+t-1,(a=o+n-1)in s?s[u]=s[a]:delete s[u];for(o=0;o<t;o++)s[o+l]=arguments[o+2];return s.length=c-n+t,i}});var Lr=require("../internals/export"),Pr=require("../internals/regexp-exec");Lr({target:"RegExp",proto:!0,forced:/./.exec!==Pr},{exec:Pr});var Rr=require("../internals/function-apply"),Tr=require("../internals/function-call"),Ir=require("../internals/function-uncurry-this"),Cr=require("../internals/fix-regexp-well-known-symbol-logic"),_r=require("../internals/is-regexp"),Nr=require("../internals/an-object"),Fr=require("../internals/require-object-coercible"),Gr=require("../internals/species-constructor"),Ur=require("../internals/advance-string-index"),Wr=require("../internals/to-length"),Dr=require("../internals/to-string"),Yr=require("../internals/get-method"),$r=require("../internals/array-slice-simple"),Hr=require("../internals/regexp-exec-abstract"),Xr=require("../internals/regexp-exec"),zr=require("../internals/regexp-sticky-helpers"),Br=require("../internals/fails"),Jr=zr.UNSUPPORTED_Y,Kr=Math.min,Qr=[].push,Vr=Ir(/./.exec),Zr=Ir(Qr),et=Ir("".slice);Cr("split",(function(e,r,t){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n=Dr(Fr(this)),i=void 0===t?4294967295:t>>>0;if(0===i)return[];if(void 0===e)return[n];if(!_r(e))return Tr(r,n,e,i);for(var o,a,u,s=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,f=new RegExp(e.source,c+"g");(o=Tr(Xr,f,n))&&!((a=f.lastIndex)>l&&(Zr(s,et(n,l,o.index)),o.length>1&&o.index<n.length&&Rr(Qr,s,$r(o,1)),u=o[0].length,l=a,s.length>=i));)f.lastIndex===o.index&&f.lastIndex++;return l===n.length?!u&&Vr(f,"")||Zr(s,""):Zr(s,et(n,l)),s.length>i?$r(s,0,i):s}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:Tr(r,this,e,t)}:r,[function(r,t){var i=Fr(this),o=null==r?void 0:Yr(r,e);return o?Tr(o,r,i,t):Tr(n,Dr(i),r,t)},function(e,i){var o=Nr(this),a=Dr(e),u=t(n,o,a,i,n!==r);if(u.done)return u.value;var s=Gr(o,RegExp),c=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Jr?"g":"y"),f=new s(Jr?"^(?:"+o.source+")":o,l),h=void 0===i?4294967295:i>>>0;if(0===h)return[];if(0===a.length)return null===Hr(f,a)?[a]:[];for(var d=0,p=0,v=[];p<a.length;){f.lastIndex=Jr?0:p;var y,m=Hr(f,Jr?et(a,p):a);if(null===m||(y=Kr(Wr(f.lastIndex+(Jr?p:0)),a.length))===d)p=Ur(a,p,c);else{if(Zr(v,et(a,d,p)),v.length===h)return v;for(var g=1;g<=m.length-1;g++)if(Zr(v,m[g]),v.length===h)return v;p=d=y}}return Zr(v,et(a,d)),v}]}),!!Br((function(){var e=/(?:)/,r=e.exec;e.exec=function(){return r.apply(this,arguments)};var t="ab".split(e);return 2!==t.length||"a"!==t[0]||"b"!==t[1]})),Jr);var rt=require("../internals/export"),tt=require("../internals/function-uncurry-this"),nt=require("../internals/indexed-object"),it=require("../internals/to-indexed-object"),ot=require("../internals/array-method-is-strict"),at=tt([].join),ut=nt!=Object,st=ot("join",",");rt({target:"Array",proto:!0,forced:ut||!st},{join:function(e){return at(it(this),void 0===e?",":e)}});var ct=require("../internals/export"),lt=require("../internals/global"),ft=require("../internals/fails"),ht=require("../internals/is-array"),dt=require("../internals/is-object"),pt=require("../internals/to-object"),vt=require("../internals/length-of-array-like"),yt=require("../internals/create-property"),mt=require("../internals/array-species-create"),gt=require("../internals/array-method-has-species-support"),qt=require("../internals/well-known-symbol"),bt=require("../internals/engine-v8-version"),xt=qt("isConcatSpreadable"),wt=lt.TypeError,jt=bt>=51||!ft((function(){var e=[];return e[xt]=!1,e.concat()[0]!==e})),Et=gt("concat"),kt=function(e){if(!dt(e))return!1;var r=e[xt];return void 0!==r?!!r:ht(e)};ct({target:"Array",proto:!0,forced:!jt||!Et},{concat:function(e){var r,t,n,i,o,a=pt(this),u=mt(a,0),s=0;for(r=-1,n=arguments.length;r<n;r++)if(kt(o=-1===r?a:arguments[r])){if(s+(i=vt(o))>9007199254740991)throw wt("Maximum allowed index exceeded");for(t=0;t<i;t++,s++)t in o&&yt(u,s,o[t])}else{if(s>=9007199254740991)throw wt("Maximum allowed index exceeded");yt(u,s++,o)}return u.length=s,u}});var Mt=require("../internals/export"),Ot=require("../internals/array-for-each");Mt({target:"Array",proto:!0,forced:[].forEach!=Ot},{forEach:Ot});var At=require("../internals/global"),St=require("../internals/dom-iterables"),Lt=require("../internals/dom-token-list-prototype"),Pt=require("../internals/array-for-each"),Rt=require("../internals/create-non-enumerable-property"),Tt=function(e){if(e&&e.forEach!==Pt)try{Rt(e,"forEach",Pt)}catch(r){e.forEach=Pt}};for(var It in St)St[It]&&Tt(At[It]&&At[It].prototype);Tt(Lt);var Ct=require("../internals/export"),_t=require("../internals/object-to-array").entries;Ct({target:"Object",stat:!0},{entries:function(e){return _t(e)}});var Nt=require("../internals/export"),Ft=require("../internals/object-assign");Nt({target:"Object",stat:!0,forced:Object.assign!==Ft},{assign:Ft});var Gt=require("../internals/export"),Ut=require("../internals/array-from");Gt({target:"Array",stat:!0,forced:!require("../internals/check-correctness-of-iteration")((function(e){Array.from(e)}))},{from:Ut});var Wt=require("../internals/string-multibyte").charAt,Dt=require("../internals/to-string"),Yt=require("../internals/internal-state"),$t=require("../internals/define-iterator"),Ht=Yt.set,Xt=Yt.getterFor("String Iterator");$t(String,"String",(function(e){Ht(this,{type:"String Iterator",string:Dt(e),index:0})}),(function(){var e,r=Xt(this),t=r.string,n=r.index;return n>=t.length?{value:void 0,done:!0}:(e=Wt(t,n),r.index+=e.length,{value:e,done:!1})}));var zt=require("../internals/export"),Bt=require("../internals/function-bind");zt({target:"Function",proto:!0,forced:Function.bind!==Bt},{bind:Bt});var Jt=require("../internals/export"),Kt=require("../internals/to-object"),Qt=require("../internals/object-keys");Jt({target:"Object",stat:!0,forced:require("../internals/fails")((function(){Qt(1)}))},{keys:function(e){return Qt(Kt(e))}});var Vt=require("../internals/export"),Zt=require("../internals/array-includes").includes,en=require("../internals/add-to-unscopables");Vt({target:"Array",proto:!0},{includes:function(e){return Zt(this,e,arguments.length>1?arguments[1]:void 0)}}),en("includes");var rn=require("../internals/export"),tn=require("../internals/function-uncurry-this"),nn=require("../internals/not-a-regexp"),on=require("../internals/require-object-coercible"),an=require("../internals/to-string"),un=require("../internals/correct-is-regexp-logic"),sn=tn("".indexOf);rn({target:"String",proto:!0,forced:!un("includes")},{includes:function(e){return!!~sn(an(on(this)),an(nn(e)),arguments.length>1?arguments[1]:void 0)}});var cn=require("../internals/export"),ln=require("../internals/descriptors"),fn=require("../internals/object-define-property").f;cn({target:"Object",stat:!0,forced:Object.defineProperty!==fn,sham:!ln},{defineProperty:fn});var hn=require("../internals/export"),dn=require("../internals/function-uncurry-this"),pn=require("../internals/array-includes").indexOf,vn=require("../internals/array-method-is-strict"),yn=dn([].indexOf),mn=!!yn&&1/yn([1],1,-0)<0,gn=vn("indexOf");hn({target:"Array",proto:!0,forced:mn||!gn},{indexOf:function(e){var r=arguments.length>1?arguments[1]:void 0;return mn?yn(this,e,r)||0:pn(this,e,r)}});var qn=function(){function r(e){n(this,r),this.mAttr="data-"+e.dataName,this.mCaptureEvents=["mouseenter","mouseleave"],this.el=e.el}return o(r,[{key:"mInit",value:function(e){var r=this;this.modules=e,this.mCheckEventTarget=this.mCheckEventTarget.bind(this),this.events&&Object.keys(this.events).forEach((function(e){return r.mAddEvent(e)}))}},{key:"mUpdate",value:function(e){this.modules=e}},{key:"mDestroy",value:function(){var e=this;this.events&&Object.keys(this.events).forEach((function(r){return e.mRemoveEvent(r)}))}},{key:"mAddEvent",value:function(e){var r=!!this.mCaptureEvents.includes(e);this.el.addEventListener(e,this.mCheckEventTarget,r)}},{key:"mRemoveEvent",value:function(e){var r=!!this.mCaptureEvents.includes(e);this.el.removeEventListener(e,this.mCheckEventTarget,r)}},{key:"mCheckEventTarget",value:function(e){var r=this.events[e.type];if("string"==typeof r)this[r](e);else{var t="["+this.mAttr+"]",n=e.target;if(this.mCaptureEvents.includes(e.type))n.matches(t)&&this.mCallEventMethod(e,r,n);else for(;n&&n!==document&&(!n.matches(t)||"undefined"==this.mCallEventMethod(e,r,n));)n=n.parentNode}}},{key:"mCallEventMethod",value:function(e,r,t){var n=t.getAttribute(this.mAttr);if(r.hasOwnProperty(n)){var i=r[n];e.hasOwnProperty("currentTarget")||Object.defineProperty(e,"currentTarget",{value:t}),e.hasOwnProperty("curTarget")||Object.defineProperty(e,"curTarget",{value:t}),this[i](e)}}},{key:"$",value:function(r,t){var n=[r.indexOf("."),r.indexOf("#"),r.indexOf("[")].filter((function(e){return-1!=e})),i=!1,o=r,a="",u=this.el;return n.length&&(i=Math.min.apply(Math,s(n)),o=r.slice(0,i),a=r.slice(i)),"object"==e(t)&&(u=t),u.querySelectorAll("["+this.mAttr+"="+o+"]"+a)}},{key:"parent",value:function(e,r){for(var t="["+this.mAttr+"="+e+"]",n=r.parentNode;n&&n!==document;){if(n.matches(t))return n;n=n.parentNode}}},{key:"getData",value:function(e,r){return(r||this.el).getAttribute(this.mAttr+"-"+e)}},{key:"setData",value:function(e,r,t){return(t||this.el).setAttribute(this.mAttr+"-"+e,r)}},{key:"call",value:function(e,r,t,n){var i=this;r&&!t&&(t=r,r=!1),this.modules[t]&&(n?this.modules[t][n]&&this.modules[t][n][e](r):Object.keys(this.modules[t]).forEach((function(n){i.modules[t][n][e](r)})))}},{key:"on",value:function(e,r,t,n){var i=this;this.modules[r]&&(n?this.modules[r][n].el.addEventListener(e,(function(e){return t(e)})):Object.keys(this.modules[r]).forEach((function(n){i.modules[r][n].el.addEventListener(e,(function(e){return t(e)}))})))}},{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),r}(),bn=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},xn=function(e){return e.reduce((function(e,r){return e+bn(r)}))},wn=function(){var e=t(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,import("@/scripts/modules/".concat(r));case 2:return t=e.sent,e.abrupt("return",t.default);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),jn=function(e){e.mDestroy(),e.destroy()},En=function(){var e=t(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<r.length)){e.next=7;break}return e.next=4,t(r[n],n,r);case 4:n+=1,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),kn=function(){function e(r){n(this,e),this.app,this.modules=r.modules||[],this.currentModules={},this.activeModules={},this.newModules={},this.moduleId=0}var r,i,c;return o(e,[{key:"init",value:(c=t(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectModules(r,t);case 2:this.initModules(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e,r){return c.apply(this,arguments)})},{key:"collectModules",value:(i=t(regeneratorRuntime.mark((function e(r,n){var i,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n||document,o=s(i.querySelectorAll("*")).filter((function(e){return s(e.attributes).some((function(e){return e.name.startsWith("data-module")}))})),r&&!this.app&&(this.app=r),this.activeModules.app={app:this.app},e.next=6,En(o,function(){var e=t(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(s(r.attributes),function(){var e=t(regeneratorRuntime.mark((function e(t){var i,o,u,s,c,l,f,h,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.name,o=t.value,!i.startsWith("data-module")){e.next=15;break}if(u=i.split("-").splice(2),s=!1,c=bn(xn(u)),!a.modules[c]){e.next=9;break}s=!0,e.next=14;break;case 9:return e.next=11,wn(c);case 11:l=e.sent,a.modules[c]=l,s=!0;case 14:s&&(f={el:r,name:c,dataName:u.join("-")},h=new a.modules[c](f),(d=o)||(a.moduleId+=1,d="m".concat(a.moduleId),r.setAttribute(i,d)),a.addActiveModule(c,d,h),p="".concat(c,"-").concat(d),n?a.newModules[p]=h:a.currentModules[p]=h);case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return i.apply(this,arguments)})},{key:"initModules",value:function(e){var r=this;Object.entries(this.currentModules).forEach((function(t){var n=u(t,2),i=n[0],o=n[1];if(e){var a=i.split("-"),s=a.shift(),c=a.pop();r.addActiveModule(s,c,o)}else r.initModule(o)}))}},{key:"initModule",value:function(e){e.mInit(this.activeModules),e.init()}},{key:"addActiveModule",value:function(e,r,t){this.activeModules[e]?Object.assign(this.activeModules[e],a({},r,t)):this.activeModules[e]=a({},r,t)}},{key:"update",value:(r=t(regeneratorRuntime.mark((function e(r){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init(this.app,r);case 2:Object.entries(this.currentModules).forEach((function(e){var r=u(e,2);return r[0],r[1].mUpdate(t.activeModules)})),Object.entries(this.newModules).forEach((function(e){var r=u(e,2);r[0];var n=r[1];return t.initModule(n)})),Object.assign(this.currentModules,this.newModules);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"destroy",value:function(e){e?this.destroyScope(e):this.destroyModules()}},{key:"destroyScope",value:function(e){var r=this;e.querySelectorAll("*").forEach((function(e){Array.from(e.attributes).forEach((function(e){if(e.name.startsWith("data-module")){var t=e.value,n=e.name.split("-").splice(2),i="".concat(xn(n),"-").concat(t),o=!1;r.currentModules[i]?o=!0:r.currentModules[bn(i)]&&(i=bn(i),o=!0),o&&(jn(r.currentModules[i]),delete r.currentModules[i])}}))})),this.activeModules={},this.newModules={}}},{key:"destroyModules",value:function(){Object.entries(this.currentModules).forEach((function(e){var r=u(e,2);r[0];var t=r[1];return jn(t)})),this.currentModules=[]}}]),e}();export{kn as default,qn as module};
